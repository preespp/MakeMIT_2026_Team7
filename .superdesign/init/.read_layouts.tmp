# layouts.md

## Layout Source
This project uses a single app-shell layout inside `templates/index.html` with:
- top header (`.app-header`)
- immersive main stage (`#mainStage`)
- overlay/banner layers (`#transitionOverlay`, `#helloBanner`)
- debug drawer (`#debugPanel`) and scrim (`#debugScrim`)

### `templates/index.html`

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sauron MedDispenser</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>
<body class="theme-idle">
  <header class="app-header">
    <div class="brand">
      <div class="status-dot" id="globalStatusDot"></div>
      <h1>Sauron <span class="fw-light">MedDispenser</span></h1>
    </div>

    <div class="header-controls">
      <div class="system-badges">
        <span class="badge" id="phaseBadge">PHASE: --</span>
        <span class="badge" id="stateBadge">STATE: --</span>
      </div>
      <button id="audioUnlockBtn" class="btn btn-outline btn-sm" type="button">Enable Voice</button>
    </div>
  </header>

  <main class="app-layout">
    <section class="main-view-container" id="mainStage">
      <div id="transitionOverlay" class="transition-overlay"></div>
      <div id="helloBanner" class="hello-banner">
        <p id="helloText">Hello</p>
      </div>

      <div id="startView" class="view active">
        <div class="view-content center-content">
          <div class="mascot-wrap" aria-hidden="true">
            <div class="mascot-eyes">
              <div class="eye">
                <div class="pupil"></div>
                <div class="glint"></div>
                <div class="lid"></div>
              </div>
              <div class="eye">
                <div class="pupil"></div>
                <div class="glint"></div>
                <div class="lid"></div>
              </div>
            </div>
          </div>
          <h2>Ready to Dispense</h2>
          <p class="subtitle">Tap start or walk near the device to begin.</p>
          <button id="startBtn" class="btn btn-primary btn-xl" type="button" disabled>Start System</button>
        </div>
      </div>

      <div id="monitorView" class="view">
        <div class="view-content center-content">
          <h2>Detecting User</h2>
          <p class="subtitle" id="distanceSubtitle">Please move closer to the camera.</p>
          <div class="camera-container">
            <video id="liveVideo" autoplay playsinline muted></video>
            <div class="scan-line"></div>
            <div class="scan-frame"></div>
          </div>
        </div>
      </div>

      <div id="recognitionView" class="view">
        <div class="view-content">
          <h2>Local Face Recognition</h2>
          <p class="subtitle">Jetson + RealSense local pipeline is active.</p>

          <div class="ring-stage">
            <div class="scan-ring"></div>
          </div>

          <div class="demo-controls">
            <div class="card">
              <h3>Recognized Existing User</h3>
              <select id="existingUserSelect" class="input-modern" disabled></select>
              <button id="existingUserBtn" class="btn btn-success" type="button" disabled>Simulate Login</button>
            </div>
            <div class="divider">OR</div>
            <div class="card">
              <h3>Unknown Face</h3>
              <button id="newUserBtn" class="btn btn-outline" type="button" disabled>Register New User</button>
            </div>
          </div>
        </div>
      </div>

      <div id="registerView" class="view">
        <div class="view-content">
          <h2>New User Registration</h2>
          <p class="subtitle">Capture a face and bind medication + servo channel.</p>
          <form id="registerForm" class="form-grid">
            <div class="input-group">
              <label for="nameInput">Full Name</label>
              <input type="text" id="nameInput" required class="input-modern" placeholder="e.g. Jane Doe" />
            </div>
            <div class="input-group">
              <label for="ageInput">Age</label>
              <input type="number" id="ageInput" class="input-modern" placeholder="Age" />
            </div>
            <div class="input-group">
              <label for="medicationInput">Medication</label>
              <input type="text" id="medicationInput" required class="input-modern" placeholder="e.g. Ibuprofen" />
            </div>
            <div class="input-group">
              <label for="dosageInput">Dosage</label>
              <input type="text" id="dosageInput" class="input-modern" placeholder="e.g. 2 pills" />
            </div>
            <div class="input-group">
              <label for="servoChannelInput">Servo Channel (1-4)</label>
              <input type="number" id="servoChannelInput" min="1" max="4" required class="input-modern" value="1" />
            </div>

            <div class="photo-capture-section">
              <button type="button" id="captureBtn" class="btn btn-outline btn-sm">Capture Face</button>
              <span id="photoStatus" class="micro-text">No photo captured.</span>
              <img id="capturePreview" class="hidden" alt="Face Preview" />
            </div>

            <button type="submit" class="btn btn-primary btn-block">Save Profile</button>
          </form>
        </div>
      </div>

      <div id="workingView" class="view">
        <div class="view-content center-content">
          <h2 id="workingTitle">Dispensing...</h2>
          <p class="subtitle" id="workingSubtitle">Preparing hardware action.</p>
          <div class="spinner"></div>

          <div id="adviceContainer" class="advice-card hidden">
            <h3>Health Advice</h3>
            <p id="adviceText"></p>
            <p class="micro-text text-accent">Auto-closing in <span id="speechRemaining">--</span>s</p>
            <button id="stopAdviceBtn" class="btn btn-outline btn-sm" type="button">Acknowledge</button>
          </div>
        </div>
      </div>

      <div id="errorView" class="view">
        <div class="view-content center-content">
          <div class="icon-error">!</div>
          <h2>System Fault</h2>
          <p class="error-text" id="lastError"></p>
          <button id="resetBtn" class="btn btn-outline mt-4" type="button">Reset System</button>
        </div>
      </div>
    </section>
  </main>

  <button id="debugToggleBtn" class="debug-toggle-btn" type="button">System Panel</button>
  <div id="debugScrim" class="debug-scrim"></div>
  <aside id="debugPanel" class="debug-panel">
    <div class="drawer-header">
      <h3>System Metrics</h3>
      <button id="debugCloseBtn" class="btn btn-outline btn-sm" type="button">Close</button>
    </div>
    <div class="metric-row"><span>UART:</span><strong id="uartVal">--</strong></div>
    <div class="metric-row"><span>Motor Power:</span><strong id="motorPowerVal">--</strong></div>
    <div class="metric-row"><span>Distance:</span><strong id="distanceVal">--</strong><span>/</span><span id="thresholdVal">--</span></div>

    <div class="simulator-box">
      <h4>Distance Simulator</h4>
      <form id="distanceForm" class="flex-row">
        <input type="number" step="0.1" id="distanceInput" class="input-modern input-sm" placeholder="Meters" value="1.0" />
        <button type="submit" id="distanceBtn" class="btn btn-secondary btn-sm" disabled>Update</button>
      </form>
    </div>

    <h4>FSM History</h4>
    <ul id="historyList" class="history-list"></ul>
  </aside>

  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>


```

